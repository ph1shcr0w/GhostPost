<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GhostPost</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Mono&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: 'Fira Mono', monospace;
            background-color: #0f0f0f;
            color: #e2e2e2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: start;
            padding: 2rem;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.2rem;
        }

        p.tagline {
            font-style: italic;
            color: #9b9b9b;
            margin-bottom: 2rem;
        }

        section {
            max-width: 800px;
            width: 100%;
        }

        a {
            color: #9be7ff;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        input[type="text"],
        select {
            padding: 0.5rem;
            margin-bottom: 1rem;
            margin-right: 1rem;
            background-color: #1c1c1c;
            color: #e2e2e2;
            border: 1px solid #333;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
        }

        th,
        td {
            padding: 0.5rem;
            border: 1px solid #333;
            text-align: left;
        }

        th {
            background-color: #1c1c1c;
        }
    </style>
</head>

<body>
    <h1>GhostPost</h1>
    <p class="tagline">Tracking letters that were never meant to vanish.</p>

    <section>
        <h2>üì¶ About</h2>
        <p><strong>GhostPost</strong> is an independent, unofficial catalog of correspondence sent to Luigi Mangione.
            The goal is to preserve transparency and document mail interactions using initials, ZIP suffixes, postmark
            dates, and basic metadata‚Äînever full names or letter contents.</p>

        <h2>üìÑ Live Catalog</h2>
        <input type="text" id="searchInput" placeholder="Search entries...">

        <div style="margin-bottom: 1rem;">
            <label>Initials:</label>
            <select id="filterInitials" onchange="filterTable()">
                <option value="">All</option>
            </select>

            <label>ZIP Suffix:</label>
            <select id="filterZip" onchange="filterTable()">
                <option value="">All</option>
            </select>

            <label>Postmark Date:</label>
            <select id="filterDate" onchange="filterTable()">
                <option value="">All</option>
            </select>

            <label>Medium:</label>
            <select id="filterMedium" onchange="filterTable()">
                <option value="">All</option>
            </select>
        </div>

        <table id="catalogTable">
            <thead>
                <tr>
                    <th>Initials</th>
                    <th>ZIP Suffix</th>
                    <th>Postmark Date</th>
                    <th>Medium</th>
                    <th>Notes</th>
                </tr>
            </thead>
            <tbody id="catalogBody">
                <!-- Data will be populated here -->
            </tbody>
        </table>

        <h2>üïµÔ∏è Submit an Entry</h2>
        <p>To contribute, submit a pull request to the <code>ghostpost</code> repo on GitHub or contact the maintainer
            via secure channels. Please do not include full names or identifying info. This is a space for ghosts, not
            profiles.</p>

        <h2>üîê Disclaimers</h2>
        <p>This project is not affiliated with Luigi Mangione, his legal team, or any campaign. It is an archival
            community effort to document postal transparency and support free expression.</p>

        <p><a href="https://github.com/YOURUSERNAME/ghostpost" target="_blank">View the GhostPost repository on
                GitHub</a></p>
    </section>

    <script>
        async function loadCatalog() {
            const response = await fetch("mangione_mail_catalog.json");
            const data = await response.json();
            const tbody = document.getElementById("catalogBody");
            const initialsSet = new Set();
            const zipSet = new Set();
            const dateSet = new Set();
            const mediumSet = new Set();

            data.forEach(entry => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${entry.Initials}</td>
                    <td>${entry["ZIP Suffix"]}</td>
                    <td>${entry["Postmark Date"]}</td>
                    <td>${entry.Medium}</td>
                    <td>${entry.Notes || ""}</td>
                `;
                tbody.appendChild(row);

                initialsSet.add(entry.Initials);
                zipSet.add(entry["ZIP Suffix"]);
                dateSet.add(entry["Postmark Date"]);
                mediumSet.add(entry.Medium);
            });

            populateFilters("filterInitials", initialsSet);
            populateFilters("filterZip", zipSet);
            populateFilters("filterDate", dateSet);
            populateFilters("filterMedium", mediumSet);
        }

        function populateFilters(id, values) {
            const select = document.getElementById(id);
            Array.from(values).sort().forEach(value => {
                const option = document.createElement("option");
                option.value = value;
                option.textContent = value;
                select.appendChild(option);
            });
        }

        function filterTable() {
            const initialsFilter = document.getElementById("filterInitials").value.toLowerCase();
            const zipFilter = document.getElementById("filterZip").value.toLowerCase();
            const dateFilter = document.getElementById("filterDate").value.toLowerCase();
            const mediumFilter = document.getElementById("filterMedium").value.toLowerCase();

            const rows = document.querySelectorAll("#catalogBody tr");

            rows.forEach(row => {
                const cells = row.querySelectorAll("td");
                const [initials, zip, date, medium] = [cells[0], cells[1], cells[2], cells[3]];

                const showRow =
                    (!initialsFilter || initials.textContent.toLowerCase().includes(initialsFilter)) &&
                    (!zipFilter || zip.textContent.toLowerCase().includes(zipFilter)) &&
                    (!dateFilter || date.textContent.toLowerCase().includes(dateFilter)) &&
                    (!mediumFilter || medium.textContent.toLowerCase().includes(mediumFilter));

                row.style.display = showRow ? "" : "none";
            });
        }

        document.getElementById('searchInput').addEventListener('keyup', function () {
            const filter = this.value.toLowerCase();
            const rows = document.querySelectorAll("#catalogBody tr");

            rows.forEach(row => {
                const cells = row.querySelectorAll("td");
                let match = false;
                cells.forEach(cell => {
                    if (cell.textContent.toLowerCase().includes(filter)) match = true;
                });
                row.style.display = match ? "" : "none";
            });
        });

        loadCatalog();
    </script>
</body>

</html>